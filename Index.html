<!DOCTYPE html>
<!--
    üåà Baby's Touch Garden - Interactive Game for Toddlers üåà
    Version 2.0 - Now with background music!
    
    Original Creator: [Your Name]
    Created: 2024
    License: MIT with Attribution
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Baby's Touch Garden</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 100%);
            height: 100vh;
            overflow: hidden;
            cursor: pointer;
        }

        #gameContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        /* Music Control Button */
        #musicControl {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 40px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        #musicControl:active {
            transform: translateX(-50%) scale(0.9);
        }

        #musicControl.playing {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.1); }
        }

        /* Start Screen */
        #startScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            color: white;
            text-align: center;
            padding: 20px;
        }

        #startButton {
            font-size: 24px;
            padding: 20px 40px;
            background: #FFD700;
            color: #333;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
            animation: bounceBtn 2s infinite;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        @keyframes bounceBtn {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .welcome-emoji {
            font-size: 80px;
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Floating Bubbles */
        .bubble {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: inset -10px -10px 20px rgba(255, 255, 255, 0.5);
        }

        .bubble.pop {
            animation: popAnimation 0.4s ease-out forwards;
        }

        @keyframes popAnimation {
            to {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        /* Stars that appear on touch */
        .star {
            position: absolute;
            font-size: 30px;
            animation: twinkle 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes twinkle {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
            }
            100% {
                transform: scale(0) rotate(360deg) translateY(-100px);
                opacity: 0;
            }
        }

        /* Floating Animals */
        .animal {
            position: absolute;
            font-size: 60px;
            cursor: pointer;
            transition: transform 0.3s ease;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
        }

        .animal:active {
            transform: scale(1.3);
        }

        .animal.bounce {
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-30px); }
        }

        /* Sun */
        #sun {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 80px;
            animation: rotateSun 10s linear infinite;
            cursor: pointer;
        }

        @keyframes rotateSun {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        #sun:active {
            animation-duration: 0.5s;
        }

        /* Score Display */
        #score {
            position: absolute;
            top: 90px;
            left: 20px;
            font-size: 24px;
            color: #FF6B6B;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.8);
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* Particle Effects */
        .particle {
            position: absolute;
            pointer-events: none;
            animation: float 2s ease-out forwards;
        }

        @keyframes float {
            to {
                transform: translateY(-200px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Mobile Optimizations */
        @media (max-width: 800px) {
            .animal {
                font-size: 50px;
            }
            #sun {
                font-size: 60px;
            }
            #musicControl {
                width: 50px;
                height: 50px;
                font-size: 30px;
            }
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div id="startScreen">
        <div class="welcome-emoji">üåà</div>
        <h1>Baby's Touch Garden</h1>
        <p>A magical world of colors and sounds!</p>
        <button id="startButton">üéÆ Start Playing!</button>
    </div>

    <!-- Game Container -->
    <div id="gameContainer" style="display: none;">
        <button id="musicControl" class="playing">üéµ</button>
        <div id="sun">‚òÄÔ∏è</div>
        <div id="score">‚≠ê 0</div>
    </div>

    <!-- Background Music (Multiple sources for compatibility) -->
    <audio id="backgroundMusic" loop>
        <!-- You can replace these with actual music files -->
        <source src="data:audio/mpeg;base64,SUQzAwAAAAAAF1RYWFgAAAAOAAAAU29mdHdhcmUATGF2ZjU4LjI5LjEwMAAA//tQwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////8AAAAATGF2YzU4LjU0AAAAAAAAAAAAAAAAJAM4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//tQxAAOAAAGkAAAAIAAANIAAAARBQBDAAACgCAAIYBQAMAQADGAAIYBQAMAQADBAEMAwQMAQADBAEMAwQBDAAEIAQwDBAAAAAAA//tQxBYOAAAGkAAAAIAAANIAAAARDBAEAAwQBDBAEMEAQwQBDBAEMEAQwQBDAAEAAwQBDBAEMEAQADBAAAAAAAAAAAAAAAAAAA==" type="audio/mpeg">
    </audio>

    <script>
        // Game State
        let score = 0;
        let musicPlaying = true;
        const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#FFD700', '#FF69B4', '#87CEEB'];
        const animals = ['üê∂', 'üê±', 'üê∏', 'üê∑', 'üêµ', 'ü¶Å', 'üê®', 'üê∞', 'ü¶ä', 'üêª', 'üêº', 'ü¶ã'];
        const shapes = ['‚≠ê', '‚ù§Ô∏è', 'üåü', 'üí´', '‚ú®', 'üåà', 'üéà', 'üå∏'];

        // Music Manager Class
        class MusicManager {
            constructor() {
                this.audioContext = null;
                this.oscillators = [];
                this.isPlaying = false;
                this.musicInterval = null;
            }

            init() {
                this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                this.playBackgroundMelody();
            }

            playBackgroundMelody() {
                if (this.isPlaying) return;
                this.isPlaying = true;

                // Simple lullaby-like melody
                const melody = [
                    {note: 261.63, duration: 500}, // C
                    {note: 293.66, duration: 500}, // D
                    {note: 329.63, duration: 500}, // E
                    {note: 261.63, duration: 500}, // C
                    {note: 261.63, duration: 500}, // C
                    {note: 293.66, duration: 500}, // D
                    {note: 329.63, duration: 500}, // E
                    {note: 261.63, duration: 500}, // C
                    {note: 329.63, duration: 500}, // E
                    {note: 349.23, duration: 500}, // F
                    {note: 392.00, duration: 1000}, // G
                ];

                let noteIndex = 0;
                
                const playNote = () => {
                    if (!this.isPlaying) return;
                    
                    const {note, duration} = melody[noteIndex % melody.length];
                    this.createTone(note, duration, 0.1); // Low volume for background
                    noteIndex++;
                };

                // Play melody continuously
                playNote(); // Play first note immediately
                this.musicInterval = setInterval(playNote, 600);
            }

            createTone(frequency, duration, volume = 0.3) {
                if (!this.audioContext) return;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(volume, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, this.audioContext.currentTime + duration / 1000);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + duration / 1000);
                
                this.oscillators.push(oscillator);
            }

            toggle() {
                this.isPlaying = !this.isPlaying;
                
                if (!this.isPlaying) {
                    clearInterval(this.musicInterval);
                    this.oscillators.forEach(osc => {
                        try { osc.stop(); } catch(e) {}
                    });
                    this.oscillators = [];
                } else {
                    this.playBackgroundMelody();
                }
                
                return this.isPlaying;
            }

            playEffect(frequency = 800, duration = 200) {
                this.createTone(frequency, duration, 0.3);
            }
        }

        // Initialize Music Manager
        const musicManager = new MusicManager();

        // Start Game Function
        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';
            
            // Initialize Audio Context on user interaction (required for mobile)
            musicManager.init();
            
            // Start creating game elements
            setInterval(createBubble, 2000);
            setInterval(createAnimal, 3000);
            
            // Create initial elements
            createBubble();
            createBubble();
            createAnimal();
        }

        // Music Control Button
        document.getElementById('musicControl').addEventListener('click', function(e) {
            e.stopPropagation();
            const isPlaying = musicManager.toggle();
            
            this.textContent = isPlaying ? 'üéµ' : 'üîá';
            this.classList.toggle('playing', isPlaying);
        });

        // Start Button
        document.getElementById('startButton').addEventListener('click', startGame);

        // Create Bubble
        function createBubble() {
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            const size = Math.random() * 60 + 40;
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            bubble.style.width = size + 'px';
            bubble.style.height = size + 'px';
            bubble.style.backgroundColor = color;
            bubble.style.left = Math.random() * (window.innerWidth - size) + 'px';
            bubble.style.top = Math.random() * (window.innerHeight - size) + 'px';
            bubble.style.opacity = '0.7';
            
            bubble.addEventListener('click', function(e) {
                e.stopPropagation();
                popBubble(this);
            });
            
            bubble.addEventListener('touchstart', function(e) {
                e.preventDefault();
                e.stopPropagation();
                popBubble(this);
            });
            
            document.getElementById('gameContainer').appendChild(bubble);
            
            setTimeout(() => {
                if (bubble.parentNode) {
                    bubble.remove();
                }
            }, 5000);
        }

        // Pop Bubble with sound effect
        function popBubble(bubble) {
            if (!bubble.classList.contains('pop')) {
                bubble.classList.add('pop');
                musicManager.playEffect(600 + Math.random() * 400, 150);
                updateScore(5);
                createStarBurst(bubble.offsetLeft + bubble.offsetWidth/2, bubble.offsetTop + bubble.offsetHeight/2);
                
                setTimeout(() => {
                    bubble.remove();
                }, 400);
            }
        }

        // Create Animal
        function createAnimal() {
            const animal = document.createElement('div');
            animal.className = 'animal';
            animal.textContent = animals[Math.floor(Math.random() * animals.length)];
            
            animal.style.left = Math.random() * (window.innerWidth - 60) + 'px';
            animal.style.top = Math.random() * (window.innerHeight - 60) + 'px';
            
            animal.addEventListener('click', function(e) {
                e.stopPropagation();
                animalClick(this);
            });
            
            animal.addEventListener('touchstart', function(e) {
                e.preventDefault();
                e.stopPropagation();
                animalClick(this);
            });
            
            document.getElementById('gameContainer').appendChild(animal);
            
            let xSpeed = (Math.random() - 0.5) * 2;
            let ySpeed = (Math.random() - 0.5) * 2;
            
            const moveAnimal = setInterval(() => {
                let x = parseFloat(animal.style.left);
                let y = parseFloat(animal.style.top);
                
                x += xSpeed;
                y += ySpeed;
                
                if (x <= 0 || x >= window.innerWidth - 60) xSpeed *= -1;
                if (y <= 0 || y >= window.innerHeight - 60) ySpeed *= -1;
                
                animal.style.left = x + 'px';
                animal.style.top = y + 'px';
            }, 50);
            
            setTimeout(() => {
                clearInterval(moveAnimal);
                if (animal.parentNode) {
                    animal.remove();
                }
            }, 8000);
        }

        // Animal Click Handler
        function animalClick(animal) {
            animal.classList.add('bounce');
            musicManager.playEffect(800, 100);
            updateScore(10);
            createParticles(animal.offsetLeft + 30, animal.offsetTop + 30);
            
            setTimeout(() => {
                animal.classList.remove('bounce');
            }, 600);
        }

        // Create Star Burst
        function createStarBurst(x, y) {
            for (let i = 0; i < 5; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.textContent = '‚≠ê';
                star.style.left = x + 'px';
                star.style.top = y + 'px';
                
                document.getElementById('gameContainer').appendChild(star);
                
                setTimeout(() => {
                    star.remove();
                }, 1000);
            }
        }

        // Create Particles
        function createParticles(x, y) {
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                particle.style.left = (x + Math.random() * 40 - 20) + 'px';
                particle.style.top = (y + Math.random() * 40 - 20) + 'px';
                particle.style.fontSize = '20px';
                
                document.getElementById('gameContainer').appendChild(particle);
                
                setTimeout(() => {
                    particle.remove();
                }, 2000);
            }
        }

        // Update Score
        function updateScore(points) {
            score += points;
            document.getElementById('score').textContent = '‚≠ê ' + score;
            
            if (score % 50 === 0 && score > 0) {
                celebrate();
            }
        }

        // Celebration Effect
        function celebrate() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'particle';
                    emoji.textContent = ['üéâ', 'üéä', 'üéà', 'üåü'][Math.floor(Math.random() * 4)];
                    emoji.style.left = Math.random() * window.innerWidth + 'px';
                    emoji.style.top = window.innerHeight + 'px';
                    emoji.style.fontSize = '40px';
                    emoji.style.animation = 'float 3s ease-out forwards';
                    
                    document.getElementById('gameContainer').appendChild(emoji);
                    
                    setTimeout(() => {
                        emoji.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        // Background Touch Handler
        document.getElementById('gameContainer').addEventListener('click', function(e) {
            if (e.target.id === 'gameContainer') {
                createStarBurst(e.clientX, e.clientY);
                musicManager.playEffect(400, 100);
                updateScore(1);
            }
        });

        document.getElementById('gameContainer').addEventListener('touchstart', function(e) {
            if (e.target.id === 'gameContainer') {
                e.preventDefault();
                const touch = e.touches[0];
                createStarBurst(touch.clientX, touch.clientY);
                musicManager.playEffect(400, 100);
                updateScore(1);
            }
        });

        // Sun Click Handler
        document.getElementById('sun').addEventListener('click', function(e) {
            e.stopPropagation();
            this.style.fontSize = '120px';
            musicManager.playEffect(1000, 200);
            updateScore(15);
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const rainbow = document.createElement('div');
                    rainbow.textContent = 'üåà';
                    rainbow.className = 'particle';
                    rainbow.style.left = (this.offsetLeft + Math.random() * 100) + 'px';
                    rainbow.style.top = (this.offsetTop + Math.random() * 100) + 'px';
                    rainbow.style.fontSize = '30px';
                    
                    document.getElementById('gameContainer').appendChild(rainbow);
                    
                    setTimeout(() => {
                        rainbow.remove();
                    }, 2000);
                }, i * 50);
            }
            
            setTimeout(() => {
                this.style.fontSize = '80px';
            }, 300);
        });

        // Prevent zoom on double tap
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        });

        console.log('üéÆ Baby Touch Garden with Music loaded! Click Start to play!');
    </script>
</body>
</html>
